<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN"
          "http://www.w3.org/TR/html4/strict.dtd">
<html>

<head>
  <title>Implements</title>
  <style>@import url(style.css);</style>
</head>

<body class="jdocu_main">
<script type="text/javascript">
parent.frames['toc'].d.openTo(23, true);
</script>
<a name="label99"></a><p class="jdocu_navbarp"><span class="jdocu_navbar"><a class="jdocu" href="topic13.html">Previous</a> - <a class="jdocu" href="topic4.html">Up</a> - <a class="jdocu" href="topic15.html">Next</a></span></p>
<h3 class="jdocu">3.10&nbsp;&nbsp;&nbsp;Implements</h3 class="jdocu">


<p>
When a device needs to export Simics interfaces (such as the
<tt>io_memory</tt> interface defined in the standard library file
<tt>io-memory.dml</tt>), this is specified by an
<b>implement</b> object, containing the methods that implement
the interface. The name of the object is also used as the name of the
Simics interface registered for the generated device, and the names and
signatures of the methods must correspond to the C functions of the
Simics interface. (A device object pointer is automatically added as the
first parameter of the generated C functions.)
<p>
By default, the C type of the Simics interface is assumed to be the name
of the object itself with the string <tt>"_interface_t"</tt> appended.
(The C type is typically a <tt>typedef</tt>:ed name for a struct
containing function pointers.) This can be changed by specifying an
explicit <tt>c_type</tt> parameter in the interface object.
<p>
For example, to create an alternative implementation of
<tt>io_memory</tt>, we can write:
<pre class="jdocu_small" style="color: black">
    implement io_memory {
      method map(addr_space_t sp, map_info_t info)
             -&gt; (int status)
      {
        ...
      }
      method operation (generic_transaction_t *op, map_info_t info)
             -&gt; (exception_type_t exc)
      {
        ...
      }
    }
</pre>
<p>
The code generated by <tt>dmlc</tt> for this example assumes that the
<tt>io_memory_interface_t</tt> is a C struct type with fields
<tt>map</tt> and <tt>operation</tt> that can hold function pointers of
the corresponding types. (The <tt>io_memory_interface_t</tt> type is
defined in the standard library file <tt>simics-api.dml</tt>, which is
automatically included by the <tt>dmlc</tt> compiler.)
<p>
<p class="jdocu_navbarp"><span class="jdocu_navbar"><a class="jdocu" href="topic13.html">Previous</a> - <a class="jdocu" href="topic4.html">Up</a> - <a class="jdocu" href="topic15.html">Next</a></span></p>
</body>
</html>
